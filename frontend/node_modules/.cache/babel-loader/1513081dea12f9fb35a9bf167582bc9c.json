{"remainingRequest":"/Users/berlin/Documents/platform/frontend/node_modules/babel-loader/lib/index.js!/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/berlin/Documents/platform/frontend/src/components/StreamEventBulletin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/berlin/Documents/platform/frontend/src/components/StreamEventBulletin.vue","mtime":1634085832808},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/babel-loader/lib/index.js","mtime":1634257405404},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1634257407250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvVXNlcnMvYmVybGluL0RvY3VtZW50cy9wbGF0Zm9ybS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9iZXJsaW4vRG9jdW1lbnRzL3BsYXRmb3JtL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGdlbmVyYWxNaXhpbiBmcm9tICcuLi9taXhpbnMvZ2VuZXJhbCc7CmltcG9ydCBzY2hlZHVsZU1peGluIGZyb20gJy4uL21peGlucy9zY2hlZHVsZSc7CmltcG9ydCBMb2FkaW5nU3Bpbm5lciBmcm9tICcuL0xvYWRpbmdTcGlubmVyLnZ1ZSc7CmltcG9ydCBMaXZlSWNvbiBmcm9tICcuL0xpdmVJY29uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFdmVudEJ1bGxldGluJywKICBtaXhpbnM6IFtnZW5lcmFsTWl4aW4sIHNjaGVkdWxlTWl4aW5dLAogIHByb3BzOiB7CiAgICBldmVudENvdW50OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogOAogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgTG9hZGluZ1NwaW5uZXI6IExvYWRpbmdTcGlubmVyLAogICAgTGl2ZUljb246IExpdmVJY29uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmF3RXZlbnRzOiBbXSwKICAgICAgZXZlbnRzV2l0aERhdGVzOiBbXSwKICAgICAgZGF5czogW10sCiAgICAgIHNlbGVjdGVkRXZlbnQ6IG51bGwsCiAgICAgIGRhdGFMb2FkZWQ6IGZhbHNlLAogICAgICBzdGFydERhdGU6IG5ldyBEYXRlKHRoaXMuZ2V0RW52VmFyaWFibGUoJ1NUQVJUX0RBVEUnKSksCiAgICAgIGVuZERhdGU6IG5ldyBEYXRlKHRoaXMuZ2V0RW52VmFyaWFibGUoJ0VORF9EQVRFJykpLAogICAgICB0YXJnZXRFdmVudElkOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZXZlbnRJc0xpdmU6IGZ1bmN0aW9uIGV2ZW50SXNMaXZlKGV2ZW50KSB7CiAgICAgIC8vIFJldHVybnMgaWYgdGhlIGV2ZW50IHVzIGN1cnJlbnRseSBoYXBwZW5pbmcKICAgICAgdmFyIHN0YXJ0ID0gbmV3IERhdGUoZXZlbnQuc3RhcnRfdGltZSk7CiAgICAgIHZhciBlbmQgPSBuZXcgRGF0ZShldmVudC5lbmRfdGltZSk7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpOwogICAgICByZXR1cm4gc3RhcnQgPD0gbm93ICYmIG5vdyA8PSBlbmQ7CiAgICB9LAogICAgZ2V0VXBjb21pbmdFdmVudHM6IGZ1bmN0aW9uIGdldFVwY29taW5nRXZlbnRzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgbm93OwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXREYXRhKF90aGlzLmdldEVudlZhcmlhYmxlKCdCQUNLRU5EJyksICdzY2hlZHVsZScpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBfdGhpcy5yYXdFdmVudHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMuZXZlbnRzV2l0aERhdGVzID0gX3RoaXMucmF3RXZlbnRzLm1hcChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZXZlbnQpLCB7fSwgewogICAgICAgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKGV2ZW50LnN0YXJ0X3RpbWUpLAogICAgICAgICAgICAgICAgICAgIGVuZF90aW1lOiBuZXcgRGF0ZShldmVudC5lbmRfdGltZSkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZW5kX3RpbWUgPj0gbm93OwogICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICB2YXIgYnRpbWUgPSBiLnN0YXJ0X3RpbWU7CiAgICAgICAgICAgICAgICAgIHZhciBhdGltZSA9IGEuc3RhcnRfdGltZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGF0aW1lLmdldFRpbWUoKSAtIGJ0aW1lLmdldFRpbWUoKTsKICAgICAgICAgICAgICAgIH0pLnNsaWNlKDAsIF90aGlzLmV2ZW50Q291bnQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0RGF0YShfdGhpczIuZ2V0RW52VmFyaWFibGUoJ0JBQ0tFTkQnKSwgJ3NjaGVkdWxlJyk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgX3RoaXMyLnJhd0V2ZW50cyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmdldFVwY29taW5nRXZlbnRzKCk7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX3RoaXMyLmRhdGFMb2FkZWQgPSB0cnVlOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMzLmdldFVwY29taW5nRXZlbnRzKCk7CiAgICAgICAgICAgICAgfSwgMzAwMDAwKTsKCiAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUzKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"sources":["StreamEventBulletin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    v-if=\"dataLoaded\"\n    class=\"card-container\"\n  >\n    <template v-if=\"eventsWithDates.length > 0\">\n      <div\n        class=\"d-flex event-card\"\n        v-for=\"event in eventsWithDates\"\n        :key=\"event.id\"\n      >\n        <img\n          class=\"banner-img\"\n          :src=\"getBannerImgForEvent(event)\"\n        />\n        <div class=\"card-content ml-3 text-left d-flex flex-column\">\n          <div class=\"top-header-row\">\n            <h3 class=\"event-title\">{{ event.event_name }}\n            </h3>\n            <LiveIcon\n              :isLive=\"eventIsLive(event)\"\n              class=\"live-icon\"\n            />\n          </div>\n          <p class=\"text-muted\"><em>{{getTimeDescriptionForEvent(event)}}</em></p>\n          <p class=\"max-lines-2\">{{event.description}}</p>\n        </div>\n      </div>\n    </template>\n    <div v-else>\n      <!--\n        TODO: waiting on design for updated error image, will replace when we can\n        <img\n        class=\"error-img mt-5\"\n        src=\"../assets/error-icon.png\"\n      />-->\n      <p class=\"no-events-text\">No upcoming events!</p>\n    </div>\n  </div>\n  <LoadingSpinner v-else />\n</template>\n\n<script>\nimport generalMixin from '../mixins/general';\nimport scheduleMixin from '../mixins/schedule';\nimport LoadingSpinner from './LoadingSpinner.vue';\nimport LiveIcon from './LiveIcon';\n\nexport default {\n  name: 'EventBulletin',\n  mixins: [generalMixin, scheduleMixin],\n  props: {\n    eventCount: {\n      type: Number,\n      default: 8,\n    },\n  },\n  components: {\n    LoadingSpinner,\n    LiveIcon,\n  },\n  data() {\n    return {\n      rawEvents: [],\n      eventsWithDates: [],\n      days: [],\n      selectedEvent: null,\n      dataLoaded: false,\n      startDate: new Date(this.getEnvVariable('START_DATE')),\n      endDate: new Date(this.getEnvVariable('END_DATE')),\n      targetEventId: null,\n    };\n  },\n  methods: {\n    eventIsLive(event) {\n      // Returns if the event us currently happening\n      const start = new Date(event.start_time);\n      const end = new Date(event.end_time);\n      const now = new Date();\n\n      return (start <= now) && (now <= end);\n    },\n    async getUpcomingEvents() {\n      const now = new Date();\n      this.rawEvents = await this.getData(\n        this.getEnvVariable('BACKEND'),\n        'schedule',\n      );\n\n      this.eventsWithDates = this.rawEvents\n        .map((event) => ({\n          ...event,\n          start_time: new Date(event.start_time),\n          end_time: new Date(event.end_time),\n        }))\n        .filter((a) => a.end_time >= now)\n        .sort((a, b) => {\n          const btime = b.start_time;\n          const atime = a.start_time;\n          return atime.getTime() - btime.getTime();\n        })\n        .slice(0, this.eventCount);\n    },\n  },\n  async mounted() {\n    this.rawEvents = await this.getData(\n      this.getEnvVariable('BACKEND'),\n      'schedule',\n    );\n    await this.getUpcomingEvents();\n    this.dataLoaded = true;\n  },\n  async created() {\n    setInterval(() => { this.getUpcomingEvents(); }, 300000);\n  },\n};\n</script>\n\n<style scoped>\np {\n  font-size: 1.5rem;\n}\n\n.top-header-row {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.live-icon {\n  margin-left: 0.5rem;\n  flex-shrink: 0;\n}\n\n.event-title {\n  font-family: var(--body-font);\n  margin-bottom: -0.25rem;\n  font-size: 2.25rem;\n}\n\n.banner-img {\n  width: 20%;\n  max-height: 100%;\n  min-width: 150px;\n  object-fit: cover;\n  border-radius: var(--border-radius);\n  flex-shrink: 0;\n}\n\n.event-card {\n  border-top: 3px solid var(--color-light-border);\n  padding: 2rem 1rem;\n}\n\n.event-card:first-of-type {\n  border-top: 0;\n}\n\n.btn {\n  margin: 0;\n}\n\n.btn-container {\n  margin-top: auto;\n}\n\n.card-content {\n  /* Flexbox witchcraft due to the default min-width being auto */\n  min-width: 0px;\n  flex: 1;\n}\n\n.card-container {\n  overflow-y: hidden;\n  min-height: 0;\n  height: 100%;\n}\n\n.event-title {\n  margin-bottom: 0;\n  font-family: var(--body-font);\n}\n\n.error-img {\n  width: 200px;\n}\n\n.no-events-text {\n  font-size: 1.75rem;\n  margin-top: 3rem;\n  font-weight: bold;\n}\n</style>\n"],"sourceRoot":"src/components"}]}