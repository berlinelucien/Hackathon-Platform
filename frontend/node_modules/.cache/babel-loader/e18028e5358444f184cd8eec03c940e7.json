{"remainingRequest":"/Users/berlin/Documents/platform/frontend/node_modules/babel-loader/lib/index.js!/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/berlin/Documents/platform/frontend/src/views/Authenticate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/berlin/Documents/platform/frontend/src/views/Authenticate.vue","mtime":1634085832810},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/babel-loader/lib/index.js","mtime":1634257405404},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1634257407250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYmVybGluL0RvY3VtZW50cy9wbGF0Zm9ybS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBnZW5lcmFsTWl4aW4gZnJvbSAnLi4vbWl4aW5zL2dlbmVyYWwnOwppbXBvcnQgTG9hZGluZ1NwaW5uZXIgZnJvbSAnLi4vY29tcG9uZW50cy9Mb2FkaW5nU3Bpbm5lci52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0F1dGhlbnRpY2F0ZScsCiAgbWl4aW5zOiBbZ2VuZXJhbE1peGluXSwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nU3Bpbm5lcjogTG9hZGluZ1NwaW5uZXIKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBwYXJhbXMsIHRva2VuUmVzcG9uc2UsIHRva2VuLCB1c2VyOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgbGlkOiBfdGhpcy4kcm91dGUucXVlcnkubGlkCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucGVyZm9ybUdldFJlcXVlc3QoX3RoaXMuZ2V0RW52VmFyaWFibGUoJ0JBQ0tFTkQnKSwgJ2F1dGh6L3Rva2VuJywgcGFyYW1zKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICB0b2tlblJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICB0b2tlbiA9IHRva2VuUmVzcG9uc2UudG9rZW47CiAgICAgICAgICAgICAgdXNlciA9IHRva2VuUmVzcG9uc2UudXNlcjsgLy8gaWYgdXNlciBkb2VzIG5vdCBleGlzdCwgcmVkaXJlY3QgdG8gbG9naW4gc2NyZWVuCgogICAgICAgICAgICAgIGlmICh1c2VyICYmIHVzZXIuaWQgJiYgdG9rZW4pIHsKICAgICAgICAgICAgICAgIF90aGlzLnNldFRva2VuKHRva2VuKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRDdXJyZW50VXNlckNvb2tpZSh1c2VyKTsKCiAgICAgICAgICAgICAgICBfdGhpcy5zZXRVc2VySWRDb29raWUodXNlci5pZCk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0VXNlck5hbWVDb29raWUodXNlci5mdWxsX25hbWUuc3BsaXQoJyAnKVswXSk7CgogICAgICAgICAgICAgICAgX3RoaXMuc2V0VXNlckdyb3VwQ29va2llKHVzZXIuZ3JvdXApOwoKICAgICAgICAgICAgICAgIF90aGlzLnNldFNwb25zb3JCb290aElkQ29va2llKHVzZXIuc3BvbnNvcl9ib290aCk7CgogICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ3RlYW1NZW1iZXJzaGlwQ2hhbmdlZCcsIHRydWUpOwoKICAgICAgICAgICAgICAgIGlmICghdXNlci5yZWdpc3RyYXRpb25fc3RhdHVzIHx8IHVzZXIucmVnaXN0cmF0aW9uX3N0YXR1cyA9PT0gJ2VtYWlsX2ludml0ZV9zZW50JykgewogICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJ1JlZ2lzdGVyJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCdMb2dpbicpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9Cn07"},{"version":3,"sources":["Authenticate.vue"],"names":[],"mappings":";;;;;;;;;;AAOA,OAAA,YAAA,MAAA,mBAAA;AACA,OAAA,cAAA,MAAA,kCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,MAAA,EAAA,CAAA,YAAA,CAFA;AAGA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA;AADA,GAHA;AAMA,EAAA,OANA,qBAMA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,cAAA,MADA,GACA;AAAA,gBAAA,GAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA;AAAA,eADA;AAAA;AAAA,qBAEA,KAAA,CAAA,iBAAA,CAAA,KAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA,aAAA,EAAA,MAAA,CAFA;;AAAA;AAEA,cAAA,aAFA;AAGA,cAAA,KAHA,GAGA,aAHA,CAGA,KAHA;AAIA,cAAA,IAJA,GAIA,aAJA,CAIA,IAJA,EAKA;;AACA,kBAAA,IAAA,IAAA,IAAA,CAAA,EAAA,IAAA,KAAA,EAAA;AACA,gBAAA,KAAA,CAAA,QAAA,CAAA,KAAA;;AACA,gBAAA,KAAA,CAAA,oBAAA,CAAA,IAAA;;AACA,gBAAA,KAAA,CAAA,eAAA,CAAA,IAAA,CAAA,EAAA;;AACA,gBAAA,KAAA,CAAA,iBAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;;AACA,gBAAA,KAAA,CAAA,kBAAA,CAAA,IAAA,CAAA,KAAA;;AACA,gBAAA,KAAA,CAAA,uBAAA,CAAA,IAAA,CAAA,aAAA;;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,uBAAA,EAAA,IAAA;;AACA,oBAAA,CAAA,IAAA,CAAA,mBAAA,IAAA,IAAA,CAAA,mBAAA,KAAA,mBAAA,EAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,UAAA;AACA,iBAFA,MAEA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA;AACA,eAbA,MAaA;AACA,gBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBA;AA5BA,CAAA","sourcesContent":["<template>\n  <div>\n    <LoadingSpinner />\n  </div>\n</template>\n\n<script>\nimport generalMixin from '../mixins/general';\nimport LoadingSpinner from '../components/LoadingSpinner.vue';\n\nexport default {\n  name: 'Authenticate',\n  mixins: [generalMixin],\n  components: {\n    LoadingSpinner,\n  },\n  async created() {\n    const params = { lid: this.$route.query.lid };\n    const tokenResponse = await this.performGetRequest(this.getEnvVariable('BACKEND'), 'authz/token', params);\n    const { token } = tokenResponse;\n    const { user } = tokenResponse;\n    // if user does not exist, redirect to login screen\n    if (user && user.id && token) {\n      this.setToken(token);\n      this.setCurrentUserCookie(user);\n      this.setUserIdCookie(user.id);\n      this.setUserNameCookie(user.full_name.split(' ')[0]);\n      this.setUserGroupCookie(user.group);\n      this.setSponsorBoothIdCookie(user.sponsor_booth);\n      this.$emit('teamMembershipChanged', true);\n      if (!user.registration_status || user.registration_status === 'email_invite_sent') {\n        this.$router.push('Register');\n      } else {\n        this.$router.push('/');\n      }\n    } else {\n      this.$router.push('Login');\n    }\n  },\n};\n</script>\n"],"sourceRoot":"src/views"}]}