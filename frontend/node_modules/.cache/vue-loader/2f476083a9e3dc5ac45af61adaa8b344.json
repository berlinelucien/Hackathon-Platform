{"remainingRequest":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/berlin/Documents/platform/frontend/src/views/ViewProfiles.vue?vue&type=style&index=0&id=2579512e&scoped=true&lang=css&","dependencies":[{"path":"/Users/berlin/Documents/platform/frontend/src/views/ViewProfiles.vue","mtime":1634085832816},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/css-loader/dist/cjs.js","mtime":1634257405846},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1634257408068},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/postcss-loader/src/index.js","mtime":1634257406599},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1634257407250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucHJvZmlsZXMtY29udGFpbmVyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0OwogIGZsZXgtZGlyZWN0aW9uOiByb3c7CiAgZmxleC13cmFwOiB3cmFwOwp9CgouY2FyZC5oYWNrZXItcHJvZmlsZS1jYXJkIHsKICB3aWR0aDogMzAlOwogIGRpc3BsYXk6IGZsZXg7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBib3gtc2hhZG93OiAwcHggMnB4IDJweCB2YXIoLS1jb2xvci1zaGFkb3cpOwogIG1hcmdpbjogMC41cmVtOwogIHBhZGRpbmc6IDAuNXJlbTsKfQoKLnNjaGVkdWxlLWNvbnRlbnQtaXRlbS1zdGFyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwcmVtOwogIGxlZnQ6IDAuNXJlbTsKfQo="},{"version":3,"sources":["ViewProfiles.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ViewProfiles.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"page-container\">\n    <h2 class=\"page-header mb-0\">Hacker Profiles</h2>\n    <p class=\"mb-5\">Click on a hacker's card to view their profile!</p>\n    <b-container v-if=\"dataLoaded\">\n      <div class=\"mb-3\">\n        <label\n          class=\"mr-2\"\n          for=\"hacker-searchbar\"\n        ><strong>Hacker Search:</strong></label>\n        <input\n          id=\"hacker-searchbar\"\n          type=\"text\"\n          placeholder=\"Enter a name here\"\n          class=\"form-control d-inline w-auto\"\n          @input=\"filterProfiles\"\n        />\n      </div>\n      <div class=\"profiles-container pb-5\">\n        <div\n          v-for=\"profile in filteredProfiles\"\n          class=\"card hacker-profile-card\"\n          :key=\"profile.id\"\n        >\n          <div class=\"schedule-content-item-star\">\n            <img\n              :src=\"getFavoriteIconFor(profile)\"\n              @click.stop=\"toggleProfileInList(profile)\"\n              style=\"width: 19px; height: 18px\"\n            />\n          </div>\n          <span style=\"margin-right: .5rem;\">{{ profile.full_name }}</span>\n          <router-link :to=\"`/profile?id=${profile.id}`\"><Button size=\"sm\">View Profile</Button></router-link>\n        </div>\n      </div>\n    </b-container>\n    <LoadingSpinner v-else />\n  </div>\n</template>\n\n<script>\nimport LoadingSpinner from '@/components/LoadingSpinner.vue';\nimport generalMixin from '../mixins/general';\nimport Button from '../components/Button.vue';\n\nexport default {\n  name: 'ViewProfiles',\n  mixins: [generalMixin],\n  components: {\n    Button,\n    LoadingSpinner,\n  },\n  data() {\n    return {\n      profiles: [],\n      filteredProfiles: [],\n      dataLoaded: false,\n    };\n  },\n  async mounted() {\n    const profiles = await this.performGetRequest(this.getEnvVariable('BACKEND'), 'users/list', {});\n    this.profiles = profiles.Items\n      .filter((profile) => Object.prototype.hasOwnProperty.call(profile, 'full_name'))\n      .sort(this.compareProfilesAlphabetically);\n\n    // Create a set of favorite profile ids\n    const params = { sponsor_id: this.getUserId() };\n    const resp = await this.performGetRequest(this.getEnvVariable('BACKEND'), 'projects/favorite_hacker', params);\n    const ids = resp.map((favoritedUser) => favoritedUser.user_id);\n    const favoriteProfileIds = new Set(ids);\n\n    // Add a field on the profiles to indicate if they're favorited\n    this.profiles = this.profiles.map((profile) => ({\n      ...profile,\n      isFavorited: favoriteProfileIds.has(profile.id),\n    }));\n\n    this.filteredProfiles = this.profiles;\n    this.sortByFavorites();\n    this.dataLoaded = true;\n  },\n  methods: {\n    filterProfiles(event) {\n      const query = event.target.value.toLowerCase();\n      this.filteredProfiles = this.profiles.filter((profile) => profile.full_name.toLowerCase().includes(query));\n    },\n    async toggleProfileInList(targetProfile) {\n      // Flip target's isFavorited state instantly\n      // eslint-disable-next-line no-param-reassign\n      targetProfile.isFavorited = !targetProfile.isFavorited;\n\n      const params = {\n        sponsor_id: this.getUserId(),\n        user_id: targetProfile.id,\n      };\n\n      const route = targetProfile.isFavorited ? 'projects/favorite_hacker' : 'projects/favorite_hacker/delete';\n      const response = await this.performPostRequest(this.getEnvVariable('BACKEND'), route, params);\n      console.log(response);\n\n      if (response !== null) {\n        // Flip star type on success\n        this.$forceUpdate();\n      } else {\n        // Otherwise, roll back the changes\n        // eslint-disable-next-line no-param-reassign\n        targetProfile.isFavorited = !targetProfile.isFavorited;\n      }\n    },\n    sortByFavorites() {\n      // Sort filteredProfiles to put favorited hackers first\n      // then sort alphabetically\n\n      this.filteredProfiles\n        .sort((profile1, profile2) => {\n          if (profile1.isFavorited === profile2.isFavorited) {\n            return this.compareProfilesAlphabetically(profile1, profile2);\n          }\n          if (profile1.isFavorited) {\n            return -1;\n          }\n          return 1;\n        });\n    },\n    compareProfilesAlphabetically(profile1, profile2) {\n      return profile1.full_name.localeCompare(profile2.full_name);\n    },\n    getFavoriteIconFor(profile) {\n      const images = require.context('../assets', false, /\\.svg|png$/);\n      // TODO change to technica colors\n      return images(`./${(profile.isFavorited ? 'star_orange_filled.svg' : 'star_orange_empty.svg')}`);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.profiles-container {\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  flex-direction: row;\n  flex-wrap: wrap;\n}\n\n.card.hacker-profile-card {\n  width: 30%;\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 0px 2px 2px var(--color-shadow);\n  margin: 0.5rem;\n  padding: 0.5rem;\n}\n\n.schedule-content-item-star {\n  position: absolute;\n  top: 0rem;\n  left: 0.5rem;\n}\n</style>\n"]}]}