{"remainingRequest":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/berlin/Documents/platform/frontend/src/views/Authenticate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/berlin/Documents/platform/frontend/src/views/Authenticate.vue","mtime":1634085832810},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/babel-loader/lib/index.js","mtime":1634257405404},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1634257407250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnZW5lcmFsTWl4aW4gZnJvbSAnLi4vbWl4aW5zL2dlbmVyYWwnOwppbXBvcnQgTG9hZGluZ1NwaW5uZXIgZnJvbSAnLi4vY29tcG9uZW50cy9Mb2FkaW5nU3Bpbm5lci52dWUnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBdXRoZW50aWNhdGUnLAogIG1peGluczogW2dlbmVyYWxNaXhpbl0sCiAgY29tcG9uZW50czogewogICAgTG9hZGluZ1NwaW5uZXIsCiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgY29uc3QgcGFyYW1zID0geyBsaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5LmxpZCB9OwogICAgY29uc3QgdG9rZW5SZXNwb25zZSA9IGF3YWl0IHRoaXMucGVyZm9ybUdldFJlcXVlc3QodGhpcy5nZXRFbnZWYXJpYWJsZSgnQkFDS0VORCcpLCAnYXV0aHovdG9rZW4nLCBwYXJhbXMpOwogICAgY29uc3QgeyB0b2tlbiB9ID0gdG9rZW5SZXNwb25zZTsKICAgIGNvbnN0IHsgdXNlciB9ID0gdG9rZW5SZXNwb25zZTsKICAgIC8vIGlmIHVzZXIgZG9lcyBub3QgZXhpc3QsIHJlZGlyZWN0IHRvIGxvZ2luIHNjcmVlbgogICAgaWYgKHVzZXIgJiYgdXNlci5pZCAmJiB0b2tlbikgewogICAgICB0aGlzLnNldFRva2VuKHRva2VuKTsKICAgICAgdGhpcy5zZXRDdXJyZW50VXNlckNvb2tpZSh1c2VyKTsKICAgICAgdGhpcy5zZXRVc2VySWRDb29raWUodXNlci5pZCk7CiAgICAgIHRoaXMuc2V0VXNlck5hbWVDb29raWUodXNlci5mdWxsX25hbWUuc3BsaXQoJyAnKVswXSk7CiAgICAgIHRoaXMuc2V0VXNlckdyb3VwQ29va2llKHVzZXIuZ3JvdXApOwogICAgICB0aGlzLnNldFNwb25zb3JCb290aElkQ29va2llKHVzZXIuc3BvbnNvcl9ib290aCk7CiAgICAgIHRoaXMuJGVtaXQoJ3RlYW1NZW1iZXJzaGlwQ2hhbmdlZCcsIHRydWUpOwogICAgICBpZiAoIXVzZXIucmVnaXN0cmF0aW9uX3N0YXR1cyB8fCB1c2VyLnJlZ2lzdHJhdGlvbl9zdGF0dXMgPT09ICdlbWFpbF9pbnZpdGVfc2VudCcpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnUmVnaXN0ZXInKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnTG9naW4nKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["Authenticate.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Authenticate.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <LoadingSpinner />\n  </div>\n</template>\n\n<script>\nimport generalMixin from '../mixins/general';\nimport LoadingSpinner from '../components/LoadingSpinner.vue';\n\nexport default {\n  name: 'Authenticate',\n  mixins: [generalMixin],\n  components: {\n    LoadingSpinner,\n  },\n  async created() {\n    const params = { lid: this.$route.query.lid };\n    const tokenResponse = await this.performGetRequest(this.getEnvVariable('BACKEND'), 'authz/token', params);\n    const { token } = tokenResponse;\n    const { user } = tokenResponse;\n    // if user does not exist, redirect to login screen\n    if (user && user.id && token) {\n      this.setToken(token);\n      this.setCurrentUserCookie(user);\n      this.setUserIdCookie(user.id);\n      this.setUserNameCookie(user.full_name.split(' ')[0]);\n      this.setUserGroupCookie(user.group);\n      this.setSponsorBoothIdCookie(user.sponsor_booth);\n      this.$emit('teamMembershipChanged', true);\n      if (!user.registration_status || user.registration_status === 'email_invite_sent') {\n        this.$router.push('Register');\n      } else {\n        this.$router.push('/');\n      }\n    } else {\n      this.$router.push('Login');\n    }\n  },\n};\n</script>\n"]}]}