{"remainingRequest":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/berlin/Documents/platform/frontend/src/components/Video.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/berlin/Documents/platform/frontend/src/components/Video.vue","mtime":1634085832808},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/babel-loader/lib/index.js","mtime":1634257405404},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1634257404436},{"path":"/Users/berlin/Documents/platform/frontend/node_modules/vue-loader/lib/index.js","mtime":1634257407250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIFRPRE86IFVwZGF0ZSBjb2RlIHRvIHN1cHBvcnQgdHdpbGlvLXZpZGVvIDIueC54CmltcG9ydCBUd2lsaW8sIHsgY3JlYXRlTG9jYWxWaWRlb1RyYWNrIH0gZnJvbSAndHdpbGlvLXZpZGVvJzsKaW1wb3J0IEF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGdlbmVyYWxNaXhpbiBmcm9tICcuLi9taXhpbnMvZ2VuZXJhbCc7Cgpjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVmlkZW8nLAogIG1peGluczogW2dlbmVyYWxNaXhpbl0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBkYXRhOiB7fSwKICAgICAgbG9jYWxUcmFjazogZmFsc2UsCiAgICAgIHJlbW90ZVRyYWNrOiAnJywKICAgICAgYWN0aXZlUm9vbTogJycsCiAgICAgIHByZXZpZXdUcmFja3M6ICcnLAogICAgICBpZGVudGl0eTogJycsCiAgICB9OwogIH0sCiAgcHJvcHM6IFsndXNlcm5hbWUnLCAncm9vbU5hbWUnXSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jcmVhdGVDaGF0KHRoaXMucm9vbU5hbWUpOwogICAgLy8gV2hlbiBhIHVzZXIgaXMgYWJvdXQgdG8gdHJhbnNpdGlvbiBhd2F5IGZyb20gdGhpcyBwYWdlLAogICAgLy8gZGlzY29ubmVjdCBmcm9tIHRoZSByb29tLCBpZiBqb2luZWQuCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5sZWF2ZVJvb21JZkpvaW5lZCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRBY2Nlc3NUb2tlbigpIHsKICAgICAgLy8gVE9ETzogUmVwbGFjZSB1c2VybmFtZSB3aXRoIGVtYWlsCiAgICAgIHJldHVybiBBeGlvcy5nZXQoYCR7dGhpcy5nZXRFbnZWYXJpYWJsZSgnQkFDS0VORCcpfS8ke3RoaXMuZ2V0Q3VycmVudEVudmlyb25tZW50KCl9L2NoYXRzL3Rva2VuYCwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHtqd3Quc2lnbih7IGVtYWlsOiB0aGlzLnVzZXJuYW1lIH0sICd0ZWNobmljYScpfWAsCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgc2hvd1Jvb20ocm9vbSkgewogICAgICB0aGlzLnJvb21OYW1lID0gcm9vbTsKICAgICAgdGhpcy5jcmVhdGVDaGF0KHRoaXMucm9vbU5hbWUpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JldW5sb2FkJywgdGhpcy5sZWF2ZVJvb21JZkpvaW5lZCk7CiAgICAgIHRoaXMuc3RhcnREYXRlID0gbmV3IERhdGUoKTsKICAgIH0sCiAgICAvLyBBdHRhY2ggdGhlIFRyYWNrcyB0byB0aGUgRE9NLgogICAgYXR0YWNoVHJhY2tzKHRyYWNrcywgY29udGFpbmVyKSB7CiAgICAgIHRyYWNrcy5mb3JFYWNoKCh0cmFjaykgPT4gewogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0cmFjay5hdHRhY2goKSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEF0dGFjaCB0aGUgUGFydGljaXBhbnQncyBUcmFja3MgdG8gdGhlIERPTS4KICAgIGF0dGFjaFBhcnRpY2lwYW50VHJhY2tzKHBhcnRpY2lwYW50LCBjb250YWluZXIpIHsKICAgICAgY29uc3QgdHJhY2tzID0gQXJyYXkuZnJvbShwYXJ0aWNpcGFudC50cmFja3MudmFsdWVzKCkpOwogICAgICB0aGlzLmF0dGFjaFRyYWNrcyh0cmFja3MsIGNvbnRhaW5lcik7CiAgICB9LAogICAgLy8gRGV0YWNoIHRoZSBUcmFja3MgZnJvbSB0aGUgRE9NLgogICAgZGV0YWNoVHJhY2tzKHRyYWNrcykgewogICAgICB0cmFja3MuZm9yRWFjaCgodHJhY2spID0+IHsKICAgICAgICB0cmFjay5kZXRhY2goKS5mb3JFYWNoKChkZXRhY2hlZEVsZW1lbnQpID0+IHsKICAgICAgICAgIGRldGFjaGVkRWxlbWVudC5yZW1vdmUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gRGV0YWNoIHRoZSBQYXJ0aWNpcGFudCdzIFRyYWNrcyBmcm9tIHRoZSBET00uCiAgICBkZXRhY2hQYXJ0aWNpcGFudFRyYWNrcyhwYXJ0aWNpcGFudCkgewogICAgICBjb25zdCB0cmFja3MgPSBBcnJheS5mcm9tKHBhcnRpY2lwYW50LnRyYWNrcy52YWx1ZXMoKSk7CiAgICAgIHRoaXMuZGV0YWNoVHJhY2tzKHRyYWNrcyk7CiAgICB9LAogICAgLy8gTGVhdmUgUm9vbS4KICAgIGxlYXZlUm9vbUlmSm9pbmVkKCkgewogICAgICBpZiAodGhpcy5hY3RpdmVSb29tKSB7CiAgICAgICAgdGhpcy5hY3RpdmVSb29tLmRpc2Nvbm5lY3QoKTsKICAgICAgICBUd2lsaW8uZGlzY29ubmVjdCgpOwogICAgICAgIGNvbnNvbGUubG9nKCdEaXNjb25uZWN0ZWQgZnJvbSByb29tJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBUT0RPOiBBZGQgbXV0ZSB2aWRlbyAvIGF1ZGlvIGZ1bmN0aW9uYWxpdHkgZm9sbG93aW5nIGh0dHBzOi8vbWVkaXVtLmNvbS90ZWFtYXJpbWFjL3R3aWxpby1wcm9ncmFtbWFibGUtdmlkZW8tY2hhdC13aXRoLWxhcmF2ZWwtYW5kLXZ1ZS1qcy1hNDg1YTJkMzFmNWQKICAgIC8vIE11dGUgYXVkaW8gb2YgdmlkZW8gY2hhdAogICAgbXV0ZV9hdWRpbygpIHsKICAgICAgdGhpcy5hY3RpdmVSb29tLmxvY2FsUGFydGljaXBhbnQuYXVkaW9UcmFja3MuZm9yRWFjaCgoYXVkaW9UcmFjaykgPT4gewogICAgICAgIGF1ZGlvVHJhY2suZGlzYWJsZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5taWNyb3Bob25lID0gZmFsc2U7CiAgICB9LAogICAgLy8gVW5tdXRlIGF1ZGlvIG9mIHZpZGVvIGNoYXQKICAgIHVubXV0ZV9hdWRpbygpIHsKICAgICAgdGhpcy5hY3RpdmVSb29tLmxvY2FsUGFydGljaXBhbnQuYXVkaW9UcmFja3MuZm9yRWFjaCgoYXVkaW9UcmFjaykgPT4gewogICAgICAgIGF1ZGlvVHJhY2suZW5hYmxlKCk7CiAgICAgIH0pOwogICAgICB0aGlzLm1pY3JvcGhvbmUgPSB0cnVlOwogICAgfSwKICAgIC8vIE11dGUgdmlkZW8KICAgIG11dGVfdmlkZW8oKSB7CiAgICAgIHRoaXMuYWN0aXZlUm9vbS5sb2NhbFBhcnRpY2lwYW50LnZpZGVvVHJhY2tzLmZvckVhY2goKHZpZGVvVHJhY2spID0+IHsKICAgICAgICB2aWRlb1RyYWNrLmRpc2FibGUoKTsKICAgICAgfSk7CiAgICAgIHRoaXMuY2FtZXJhID0gZmFsc2U7CiAgICB9LAogICAgLy8gVW5tdXRlIHZpZGVvCiAgICB1bm11dGVfdmlkZW8oKSB7CiAgICAgIHRoaXMuYWN0aXZlUm9vbS5sb2NhbFBhcnRpY2lwYW50LnZpZGVvVHJhY2tzLmZvckVhY2goKHZpZGVvVHJhY2spID0+IHsKICAgICAgICB2aWRlb1RyYWNrLmVuYWJsZSgpOwogICAgICB9KTsKICAgICAgdGhpcy5jYW1lcmEgPSB0cnVlOwogICAgfSwKICAgIGNyZWF0ZUNoYXQocm9vbU5hbWUpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgY29uc3QgVnVlVGhpcyA9IHRoaXM7CiAgICAgIHRoaXMuZ2V0QWNjZXNzVG9rZW4oKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIFZ1ZVRoaXMucm9vbU5hbWUgPSBudWxsOwogICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29uc3QgY29ubmVjdE9wdGlvbnMgPSB7CiAgICAgICAgICBuYW1lOiByb29tTmFtZSwKICAgICAgICAgIC8vIGxvZ0xldmVsOiAnZGVidWcnLAogICAgICAgICAgYXVkaW86IHRydWUsCiAgICAgICAgICB2aWRlbzogeyB3aWR0aDogNjAwIH0sCiAgICAgICAgfTsKICAgICAgICAgIC8vIGJlZm9yZSBhIHVzZXIgZW50ZXJzIGEgbmV3IHJvb20sCiAgICAgICAgICAvLyBkaXNjb25uZWN0IHRoZSB1c2VyIGZyb20gdGhleSBqb2luZWQgYWxyZWFkeQogICAgICAgIHRoaXMubGVhdmVSb29tSWZKb2luZWQoKTsKCiAgICAgICAgLy8gcmVtb3ZlIGFueSByZW1vdGUgdHJhY2sgd2hlbiBqb2luaW5nIGEgbmV3IHJvb20KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlVHJhY2snKS5pbm5lckhUTUwgPSAnJzsKICAgICAgICBUd2lsaW8uY29ubmVjdCh0b2tlbiwgY29ubmVjdE9wdGlvbnMpLnRoZW4oKHJvb20pID0+IHsKICAgICAgICAgIC8vIHNldCBhY3RpdmUgdG9vbQogICAgICAgICAgVnVlVGhpcy5hY3RpdmVSb29tID0gcm9vbTsKICAgICAgICAgIFZ1ZVRoaXMucm9vbU5hbWUgPSByb29tTmFtZTsKICAgICAgICAgIFZ1ZVRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byByb29tJyk7CgogICAgICAgICAgLy8gQXR0YWNoIHRoZSBUcmFja3Mgb2YgdGhlIFJvb20ncyBQYXJ0aWNpcGFudHMuCiAgICAgICAgICByb29tLnBhcnRpY2lwYW50cy5mb3JFYWNoKChwYXJ0aWNpcGFudCkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhwYXJ0aWNpcGFudCk7CiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlVHJhY2snKTsKICAgICAgICAgICAgVnVlVGhpcy5hdHRhY2hQYXJ0aWNpcGFudFRyYWNrcyhwYXJ0aWNpcGFudCwgcHJldmlld0NvbnRhaW5lcik7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIFdoZW4gYSBQYXJ0aWNpcGFudCBqb2lucyB0aGUgUm9vbSwgbG9nIHRoZSBldmVudC4KICAgICAgICAgIHJvb20ub24oJ3BhcnRpY2lwYW50Q29ubmVjdGVkJywgKHBhcnRpY2lwYW50KSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBKb2luaW5nOiAnJHtwYXJ0aWNpcGFudC5pZGVudGl0eX0nYCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIFdoZW4gYSBQYXJ0aWNpcGFudCBhZGRzIGEgVHJhY2ssIGF0dGFjaCBpdCB0byB0aGUgRE9NLgogICAgICAgICAgcm9vbS5vbigndHJhY2tBZGRlZCcsICh0cmFjaywgcGFydGljaXBhbnQpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coYCR7cGFydGljaXBhbnQuaWRlbnRpdHl9IGFkZGVkIHRyYWNrOiAke3RyYWNrLmtpbmR9YCk7CiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVtb3RlVHJhY2snKTsKICAgICAgICAgICAgVnVlVGhpcy5hdHRhY2hUcmFja3MoW3RyYWNrXSwgcHJldmlld0NvbnRhaW5lcik7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIFdoZW4gYSBQYXJ0aWNpcGFudCByZW1vdmVzIGEgVHJhY2ssIGRldGFjaCBpdCBmcm9tIHRoZSBET00uCiAgICAgICAgICByb29tLm9uKCd0cmFja1JlbW92ZWQnLCAodHJhY2ssIHBhcnRpY2lwYW50KSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3BhcnRpY2lwYW50LmlkZW50aXR5fSByZW1vdmVkIHRyYWNrOiAke3RyYWNrLmtpbmR9YCk7CiAgICAgICAgICAgIFZ1ZVRoaXMuZGV0YWNoVHJhY2tzKFt0cmFja10pOwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyBXaGVuIGEgUGFydGljaXBhbnQgbGVhdmVzIHRoZSBSb29tLCBkZXRhY2ggaXRzIFRyYWNrcy4KICAgICAgICAgIHJvb20ub24oJ3BhcnRpY2lwYW50RGlzY29ubmVjdGVkJywgKHBhcnRpY2lwYW50KSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQYXJ0aWNpcGFudCAnJHtwYXJ0aWNpcGFudC5pZGVudGl0eX0nIGxlZnQgdGhlIHJvb21gKTsKICAgICAgICAgICAgVnVlVGhpcy5kZXRhY2hQYXJ0aWNpcGFudFRyYWNrcyhwYXJ0aWNpcGFudCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIGlmIGxvY2FsIHByZXZpZXcgaXMgbm90IGFjdGl2ZSwgY3JlYXRlIGl0CiAgICAgICAgICBpZiAoIVZ1ZVRoaXMubG9jYWxUcmFjaykgewogICAgICAgICAgICBjcmVhdGVMb2NhbFZpZGVvVHJhY2soKS50aGVuKCh0cmFjaykgPT4gewogICAgICAgICAgICAgIGNvbnN0IGxvY2FsTWVkaWFDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYWxUcmFjaycpOwogICAgICAgICAgICAgIGxvY2FsTWVkaWFDb250YWluZXIuYXBwZW5kQ2hpbGQodHJhY2suYXR0YWNoKCkpOwogICAgICAgICAgICAgIFZ1ZVRoaXMubG9jYWxUcmFjayA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Video.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"col-md-6 box\">\n    <div class=\"roomTitle\">\n      <span v-if=\"loading\"> Loading... {{roomName}}</span>\n      <span v-else-if=\"!loading && roomName\"> Connected to {{roomName}}</span>\n      <span v-else>Select a room to get started</span>\n    </div>\n    <div class=\"row remote_video_container\">\n      <div id=\"remoteTrack\"></div>\n    </div>\n    <div class=\"spacing\"></div>\n    <div class=\"row\">\n      <div id=\"localTrack\"></div>\n    </div>\n    <button type=\"submit\"\n      size=\"sm\"\n      style=\"top: 5px,\n      left: 5px\"\n      @click=\"\n        leaveRoomIfJoined();\n      \"\n      class=\"btn btn-danger mb-2 Botton\">End Meeting\n    </button>\n  </div>\n</template>\n\n<script>\n// TODO: Update code to support twilio-video 2.x.x\nimport Twilio, { createLocalVideoTrack } from 'twilio-video';\nimport Axios from 'axios';\nimport generalMixin from '../mixins/general';\n\nconst jwt = require('jsonwebtoken');\n\nexport default {\n  name: 'Video',\n  mixins: [generalMixin],\n  data() {\n    return {\n      loading: false,\n      data: {},\n      localTrack: false,\n      remoteTrack: '',\n      activeRoom: '',\n      previewTracks: '',\n      identity: '',\n    };\n  },\n  props: ['username', 'roomName'],\n  created() {\n    this.createChat(this.roomName);\n    // When a user is about to transition away from this page,\n    // disconnect from the room, if joined.\n    window.addEventListener('beforeunload', this.leaveRoomIfJoined);\n  },\n  methods: {\n    async getAccessToken() {\n      // TODO: Replace username with email\n      return Axios.get(`${this.getEnvVariable('BACKEND')}/${this.getCurrentEnvironment()}/chats/token`, {\n        headers: {\n          Authorization: `Bearer ${jwt.sign({ email: this.username }, 'technica')}`,\n        },\n      });\n    },\n    showRoom(room) {\n      this.roomName = room;\n      this.createChat(this.roomName);\n      window.addEventListener('beforeunload', this.leaveRoomIfJoined);\n      this.startDate = new Date();\n    },\n    // Attach the Tracks to the DOM.\n    attachTracks(tracks, container) {\n      tracks.forEach((track) => {\n        container.appendChild(track.attach());\n      });\n    },\n    // Attach the Participant's Tracks to the DOM.\n    attachParticipantTracks(participant, container) {\n      const tracks = Array.from(participant.tracks.values());\n      this.attachTracks(tracks, container);\n    },\n    // Detach the Tracks from the DOM.\n    detachTracks(tracks) {\n      tracks.forEach((track) => {\n        track.detach().forEach((detachedElement) => {\n          detachedElement.remove();\n        });\n      });\n    },\n    // Detach the Participant's Tracks from the DOM.\n    detachParticipantTracks(participant) {\n      const tracks = Array.from(participant.tracks.values());\n      this.detachTracks(tracks);\n    },\n    // Leave Room.\n    leaveRoomIfJoined() {\n      if (this.activeRoom) {\n        this.activeRoom.disconnect();\n        Twilio.disconnect();\n        console.log('Disconnected from room');\n      }\n    },\n    // TODO: Add mute video / audio functionality following https://medium.com/teamarimac/twilio-programmable-video-chat-with-laravel-and-vue-js-a485a2d31f5d\n    // Mute audio of video chat\n    mute_audio() {\n      this.activeRoom.localParticipant.audioTracks.forEach((audioTrack) => {\n        audioTrack.disable();\n      });\n      this.microphone = false;\n    },\n    // Unmute audio of video chat\n    unmute_audio() {\n      this.activeRoom.localParticipant.audioTracks.forEach((audioTrack) => {\n        audioTrack.enable();\n      });\n      this.microphone = true;\n    },\n    // Mute video\n    mute_video() {\n      this.activeRoom.localParticipant.videoTracks.forEach((videoTrack) => {\n        videoTrack.disable();\n      });\n      this.camera = false;\n    },\n    // Unmute video\n    unmute_video() {\n      this.activeRoom.localParticipant.videoTracks.forEach((videoTrack) => {\n        videoTrack.enable();\n      });\n      this.camera = true;\n    },\n    createChat(roomName) {\n      this.loading = true;\n      const VueThis = this;\n      this.getAccessToken().then((response) => {\n        VueThis.roomName = null;\n        const { token } = response.data;\n        const connectOptions = {\n          name: roomName,\n          // logLevel: 'debug',\n          audio: true,\n          video: { width: 600 },\n        };\n          // before a user enters a new room,\n          // disconnect the user from they joined already\n        this.leaveRoomIfJoined();\n\n        // remove any remote track when joining a new room\n        document.getElementById('remoteTrack').innerHTML = '';\n        Twilio.connect(token, connectOptions).then((room) => {\n          // set active toom\n          VueThis.activeRoom = room;\n          VueThis.roomName = roomName;\n          VueThis.loading = false;\n          console.log('Connected to room');\n\n          // Attach the Tracks of the Room's Participants.\n          room.participants.forEach((participant) => {\n            console.log(participant);\n            const previewContainer = document.getElementById('remoteTrack');\n            VueThis.attachParticipantTracks(participant, previewContainer);\n          });\n          // When a Participant joins the Room, log the event.\n          room.on('participantConnected', (participant) => {\n            console.log(`Joining: '${participant.identity}'`);\n          });\n          // When a Participant adds a Track, attach it to the DOM.\n          room.on('trackAdded', (track, participant) => {\n            console.log(`${participant.identity} added track: ${track.kind}`);\n            const previewContainer = document.getElementById('remoteTrack');\n            VueThis.attachTracks([track], previewContainer);\n          });\n          // When a Participant removes a Track, detach it from the DOM.\n          room.on('trackRemoved', (track, participant) => {\n            console.log(`${participant.identity} removed track: ${track.kind}`);\n            VueThis.detachTracks([track]);\n          });\n          // When a Participant leaves the Room, detach its Tracks.\n          room.on('participantDisconnected', (participant) => {\n            console.log(`Participant '${participant.identity}' left the room`);\n            VueThis.detachParticipantTracks(participant);\n          });\n          // if local preview is not active, create it\n          if (!VueThis.localTrack) {\n            createLocalVideoTrack().then((track) => {\n              const localMediaContainer = document.getElementById('localTrack');\n              localMediaContainer.appendChild(track.attach());\n              VueThis.localTrack = true;\n            });\n          }\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style >\n  .remote_video_container {\n    left: 0;\n    margin: 0;\n    border: 1px solid rgb(124, 129, 124);\n  }\n  #localTrack video {\n      border: 3px solid rgb(124, 129, 124);\n      margin: 0px;\n      max-width: 50% !important;\n      background-repeat: no-repeat;\n  }\n  .spacing {\n    padding: 20px;\n    width: 100%;\n  }\n  .roomTitle {\n      border: 1px solid rgb(124, 129, 124);\n      padding: 4px;\n      color: dodgerblue;\n  }\n</style>\n"]}]}